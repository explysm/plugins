(function(u,d,l){"use strict";const a=[],{getCustomEmojiById:j}=d.findByStoreName("EmojiStore"),h=d.findByName("RowManager"),g=/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/;a.push(l.before("generate",h.prototype,function([o]){if(o.rowType!==1)return;const r=o.message.embeds;for(let e=0;e<r.length;e++){const s=r[e];s.type==="image"&&s.url.match(g)&&r.splice(e--,1)}})),a.push(l.after("generate",h.prototype,function([o],r){if(o.rowType!==1)return;const{content:e}=r.message;if(!Array.isArray(e))return;let s=!0;const n=[];for(let t=0;t<e.length;t++){const i=e[t];if(i.type==="link"){const c=i.target.match(g);if(c){const p=c[1],m=j(p);let f=!1;(m?.animated===!0||c[0].endsWith(".gif")||c[0].endsWith(".webp")&&!m)&&(f=!0);const y=`https://cdn.discordapp.com/emojis/${p}.${f?"gif":"webp"}?size=128`;n.push({type:"customEmoji",id:p,alt:m?.name??"<realmoji>",src:y,frozenSrc:y.replace("gif","webp"),animated:f})}else s=!1,n.push(i)}else i.type==="text"&&i.content===" "||(s=!1),n.push(i)}const b=s;for(let t=0;t<n.length;t++)n[t].type==="customEmoji"&&(n[t].jumboable=b?!0:void 0);r.message.content=n}));const w=function(){return a.forEach(function(o){return o()})};return u.onUnload=w,u})({},vendetta.metro,vendetta.patcher);
