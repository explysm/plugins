(function(f,u,l){"use strict";const s=[],{getCustomEmojiById:h}=u.findByStoreName("EmojiStore"),p=u.findByName("RowManager"),a=/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/;s.push(l.before("generate",p.prototype,function([n]){if(n.rowType!==1)return;let e=n.message.content;if(!e?.length)return;const o=e.match(a)?.index;if(o===void 0)return;const i=e.slice(o).trim().split(`
`);if(!i.every(function(r){return r.match(a)}))return;for(e=e.slice(0,o);e.indexOf("  ")!==-1;)e=e.replace("  ",` ${i.shift()} `);e=e.trim(),i.length&&(e+=` ${i.join(" ")}`);const t=n.message.embeds;for(let r=0;r<t.length;r++){const c=t[r];c.type==="image"&&c.url.match(a)&&t.splice(r--,1)}n.message.content=e,n.__realmoji=!0})),s.push(l.after("generate",p.prototype,function([n],e){if(n.rowType!==1||n.__realmoji!==!0)return;const{content:o}=e.message;if(!Array.isArray(o))return;const i=o.every(function(t){return t.type==="link"&&t.target.match(a)||t.type==="text"&&t.content===" "});for(let t=0;t<o.length;t++){const r=o[t];if(r.type!=="link")continue;const c=r.target.match(a);if(!c)continue;const m=c[1],d=h(m),g=d?.animated??c[0].includes(".gif"),y=`https://cdn.discordapp.com/emojis/${m}.${g?"gif":"webp"}?size=128`;o[t]={type:"customEmoji",id:m,alt:d?.name??"<realmoji>",src:y,frozenSrc:y.replace("gif","webp"),animated:g,jumboable:i?!0:void 0}}}));const j=function(){return s.forEach(function(n){return n()})};return f.onUnload=j,f})({},vendetta.metro,vendetta.patcher);
