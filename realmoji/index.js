(function(f,m,u){"use strict";const a=[],{getCustomEmojiById:d}=m.findByStoreName("EmojiStore"),l=m.findByName("RowManager"),s=/https:\/\/cdn.discordapp.com\/emojis\/(\d+)\.\w+/;a.push(u.before("generate",l.prototype,function([n]){if(n.rowType!==1)return;let e=n.message.content;if(!e?.length)return;const o=e.match(s)?.index;if(o===void 0)return;const c=e.slice(o).trim().split(`
`);if(!c.every(function(r){return r.match(s)}))return;for(e=e.slice(0,o);e.indexOf("  ")!==-1;)e=e.replace("  ",` ${c.shift()} `);e=e.trim(),c.length&&(e+=` ${c.join(" ")}`);const t=n.message.embeds;for(let r=0;r<t.length;r++){const i=t[r];i.type==="image"&&i.url.match(s)&&t.splice(r--,1)}n.message.content=e,n.__realmoji=!0})),a.push(u.after("generate",l.prototype,function([n],e){if(n.rowType!==1||n.__realmoji!==!0)return;const{content:o}=e.message;if(!Array.isArray(o))return;const c=o.every(function(t){return t.type==="link"&&t.target.match(s)||t.type==="text"&&t.content===" "});for(let t=0;t<o.length;t++){const r=o[t];if(r.type!=="link")continue;const i=r.target.match(s);if(!i)continue;const p=`${i[0]}?size=128`,g=d(i[1]);o[t]={type:"customEmoji",id:i[1],alt:g?.name??"<realmoji>",src:p,frozenSrc:p.replace("gif","webp"),jumboable:c?!0:void 0}}}));const y=function(){return a.forEach(function(n){return n()})};return f.onUnload=y,f})({},vendetta.metro,vendetta.patcher);
